define("phyxdown/ionejs/1.0.0/ionejs",["./core/Engine","./utils/inherits","./core/One","./geom/Matrix2D","./geom/Point","./core/events/MouseEvent","./core/Event","./core/ones/Stage","./core/ones/Painter","./core/hitTests/all","./core/hitTests/ifInCircle","./helpers/Creator"],function(a,b,c){var d={},e=a("./core/Engine"),f=a("./core/Event"),g=a("./core/One"),h=a("./core/ones/Stage"),i=a("./core/ones/Painter"),j=a("./core/hitTests/all"),k=a("./geom/Point"),l=a("./helpers/Creator"),m=a("./utils/inherits"),n=new l;n.set("One",g),n.set("Stage",h),n.set("Painter",i),d.inherits=m,d.create=function(a){return n.parse(a)},d.register=function(a,b){return n.set(a,b)},d.One=g,d.Stage=h,d.Painter=i,d.Event=f,d.hitTests=j,d.Point=k,d.hitTests=j,d.instance=new e,c.exports=d}),define("phyxdown/ionejs/1.0.0/core/Engine",["phyxdown/ionejs/1.0.0/utils/inherits","phyxdown/ionejs/1.0.0/core/One","phyxdown/ionejs/1.0.0/geom/Matrix2D","phyxdown/ionejs/1.0.0/geom/Point","phyxdown/ionejs/1.0.0/core/events/MouseEvent","phyxdown/ionejs/1.0.0/core/Event"],function(a,b,c){a("phyxdown/ionejs/1.0.0/utils/inherits"),a("phyxdown/ionejs/1.0.0/core/One");var d=a("phyxdown/ionejs/1.0.0/core/events/MouseEvent"),e=a("phyxdown/ionejs/1.0.0/geom/Point"),f=function(){this._stage=null,this._canvas=null,this._debug=!0},g=f.prototype;g.init=function(a,b){this._stage=a,this._canvas=b;var c=b.offsetLeft,f=b.offsetTop,g=function(){b.width=a.width=window.innerWidth-(2*c+5),b.height=a.height=window.innerHeight-(2*c+5)};window.addEventListener("resize",g),g();var h=function(b){var g=new e(b.pageX-c,b.pageY-f),h=a.hit(g);if(h){var i=h.globalToLocal(g);h.dispatchEvent(new d({type:b.type,global:g,local:i}))}};b.addEventListener("mousedown",function(){h.apply(null,arguments)}),document.addEventListener("mouseup",function(){h.apply(null,arguments)}),document.addEventListener("mousemove",function(){h.apply(null,arguments)}),b.addEventListener("click",h)},g.run=function(){var a=this,b=a._canvas,c=a._stage,d=b.getContext("2d"),e=Date.now(),f=function(){var b=Date.now();c._draw(d);var g=Date.now(),h=g-b;setTimeout(f,16.6-h>0?16.6-h:0);var i=1e3/(Date.now()-e);e=Date.now(),a._debug&&(d.save(),d.fillStyle="#000000",d.font="bold 28px Aerial",d.fillText("FPS: "+(100*i<<0)/100,30,52),d.restore())};f()},c.exports=f}),define("phyxdown/ionejs/1.0.0/utils/inherits",[],function(a,b,c){c.exports=function(a,b){return a._super=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}}),define("phyxdown/ionejs/1.0.0/core/One",["phyxdown/ionejs/1.0.0/geom/Matrix2D","phyxdown/ionejs/1.0.0/geom/Point"],function(a,b,c){var d=a("phyxdown/ionejs/1.0.0/geom/Matrix2D"),e=a("phyxdown/ionejs/1.0.0/geom/Point"),f=function(a){a=a||{};var b={};b.bubble={},b.capture={},this._listeners=b,this._name=a.name||null,this._parent=null,this._childMap={},this._children=[],this._active=!0,this._visible=!0,this._hitable=!1,this.x=a.x,this.y=a.y,this.regX=a.regX,this.regY=a.regY,this.rotation=a.rotation,this.scaleX=a.scaleX,this.scaleY=a.scaleY,this.skewX=a.skewX,this.skewY=a.skewY,this.alpha=a.alpha},g=f.prototype;g._mapChild=function(a){if(a._name){var b=a._name,c=this._childMap;c[b]?c[b].unshift(a):c[b]=[a]}},g._unmapChild=function(a){if(a._name){var b=a._name,c=this._childMap;if(!c[b])return;if(1==c[b].length)delete c[b];else for(var d=0,e=c[b].length;e>d;d++)c[b][d]===a&&c[b].splice(d,1)}},g.addChild=function(a){a.setParent(this),this._children.push(a),this._mapChild(a)},g.insertChild=function(a,b){a.setParent(this),this._children.splice(b,0,a),this._mapChild(a)},g.removeChild=function(a){for(var b=this._children,c=0,d=b.length;d>c;c++)b[c]===a&&(a.setParent(null),b.splice(c,1),this._unmapChild(a))},g.query=function(a,b){try{var b=b||".",c=a.split(b),d=function(a,b){return b.length>1?d(a._childMap[b.shift()][0],b):a._childMap[b.shift()][0]};return d(this,c)||null}catch(e){return null}},g.getParent=function(){return this._parent},g.setParent=function(a){this._parent=a},g.getAncestors=function(){for(var a=[],b=this;b._parent;)b=b._parent,a.push(b);return a},g.addEventListener=function(a,b,c){for(var d=c?"capture":"bubble",e=this._listeners[d][a],f=0,g=e?e.length:0;g>f;f++)if(e[f]===b)return;return e?e.push(b):this._listeners[d][a]=[b],b},g.removeEventListener=function(a,b,c){for(var d=c?"capture":"bubble",e=this._listeners[d][a],f=0,g=e?e.length:0;g>f;f++)if(e[f]===b){1==g?delete this._listeners[d][a]:e.splice(f,1);break}},g.dispatchEvent=function(a){a.target=this;var b=this.getAncestors();a.phase=Event.CAPTURING_PHASE;for(var c=b.length-1;c>=0;c--)if(b[c]._dispatchEvent(a),a._propagationStopped)return;if(a.phase=Event.TARGET_PHASE,this._dispatchEvent(a),!a._propagationStopped){a.phase=Event.BUBBLING_PHASE;for(var c=0,d=b.length;d>c;c++)if(b[c]._dispatchEvent(a),a._propagationStopped)return}},g._dispatchEvent=function(a){a.currentTarget=this;try{var b=a.phase===Event.CAPTURING_PHASE?"capture":"bubble",c=this._listeners[b][a.type].slice();for(i=0,len=c.length;len>i&&(c[i](a),!a._immediatePropagationStopped);i++);}catch(d){}},g._getRelativeMatrix=function(){var a=new d;return a.identity().appendTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY,this.regX,this.regY)},g._getAbsoluteMatrix=function(){var a=this.getAncestors(),b=new d;b.identity();for(var c=a.length-1;c>-1;c--)b.appendMatrix(a[c]._getRelativeMatrix());return b.appendMatrix(this._getRelativeMatrix()),b},g.globalToLocal=function(a){var b=this._getAbsoluteMatrix();return b.invert().append(1,0,0,1,a.x,a.y),new e(b.tx,b.ty)},g.localToGlobal=function(a){var b=this._getAbsoluteMatrix();return b.append(1,0,0,1,a.x,a.y),new e(b.tx,b.ty)},g.hit=function(a){for(var b=this._children,c=b.length-1;c>-1;c--){var d=b[c].hit(a);if(d)return d}return this._hitable&&this.testHit(this.globalToLocal(a))?this:null},g.testHit=function(){return!1},g._draw=function(a){a.save();var b=this._getRelativeMatrix();a.transform(b.a,b.b,b.c,b.d,b.tx,b.ty),this._visible&&this.draw(a);for(var c=0,d=this._children.length;d>c;c++){var e=this._children[c];e._draw(a)}a.restore()},g.draw=function(){},c.exports=f}),define("phyxdown/ionejs/1.0.0/geom/Matrix2D",[],function(a,b,c){function d(a,b,c,d,e,f){this.setValues(a,b,c,d,e,f)}var e=d.prototype;d.DEG_TO_RAD=Math.PI/180,d.identity=null,e.setValues=function(a,b,c,d,e,f){return this.a=null==a?1:a,this.b=b||0,this.c=c||0,this.d=null==d?1:d,this.tx=e||0,this.ty=f||0,this},e.append=function(a,b,c,d,e,f){var g=this.tx;if(1!=a||0!=b||0!=c||1!=d){var h=this.a,i=this.c;this.a=h*a+this.b*c,this.b=h*b+this.b*d,this.c=i*a+this.d*c,this.d=i*b+this.d*d}return this.tx=g*a+this.ty*c+e,this.ty=g*b+this.ty*d+f,this},e.prepend=function(a,b,c,d,e,f){var g=this.a,h=this.b,i=this.c,j=this.d;return this.a=a*g+b*i,this.b=a*h+b*j,this.c=c*g+d*i,this.d=c*h+d*j,this.tx=e*g+f*i+this.tx,this.ty=e*h+f*j+this.ty,this},e.appendMatrix=function(a){return this.append(a.a,a.b,a.c,a.d,a.tx,a.ty)},e.prependMatrix=function(a){return this.prepend(a.a,a.b,a.c,a.d,a.tx,a.ty)},e.appendTransform=function(a,b,c,e,f,g,h,i,j){if(f%360)var k=f*d.DEG_TO_RAD,l=Math.cos(k),m=Math.sin(k);else l=1,m=0;return(i||j)&&(this.tx-=i,this.ty-=j),g||h?(g*=d.DEG_TO_RAD,h*=d.DEG_TO_RAD,this.append(l*c,m*c,-m*e,l*e,0,0),this.append(Math.cos(h),Math.sin(h),-Math.sin(g),Math.cos(g),a,b)):this.append(l*c,m*c,-m*e,l*e,a,b),this},e.prependTransform=function(a,b,c,e,f,g,h,i,j){if(f%360)var k=f*d.DEG_TO_RAD,l=Math.cos(k),m=Math.sin(k);else l=1,m=0;return g||h?(g*=d.DEG_TO_RAD,h*=d.DEG_TO_RAD,this.prepend(Math.cos(h),Math.sin(h),-Math.sin(g),Math.cos(g),a,b),this.prepend(l*c,m*c,-m*e,l*e,0,0)):this.prepend(l*c,m*c,-m*e,l*e,a,b),(i||j)&&(this.tx-=i*this.a+j*this.c,this.ty-=i*this.b+j*this.d),this},e.rotate=function(a){var b=Math.cos(a),c=Math.sin(a),d=this.a,e=this.c,f=this.tx;return this.a=d*b-this.b*c,this.b=d*c+this.b*b,this.c=e*b-this.d*c,this.d=e*c+this.d*b,this.tx=f*b-this.ty*c,this.ty=f*c+this.ty*b,this},e.skew=function(a,b){return a*=d.DEG_TO_RAD,b*=d.DEG_TO_RAD,this.prepend(Math.cos(b),Math.sin(b),-Math.sin(a),Math.cos(a),0,0),this},e.scale=function(a,b){return this.a*=a,this.d*=b,this.c*=a,this.b*=b,this.tx*=a,this.ty*=b,this},e.translate=function(a,b){return this.tx+=a,this.ty+=b,this},e.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},e.invert=function(){var a=this.a,b=this.b,c=this.c,d=this.d,e=this.tx,f=a*d-b*c;return this.a=d/f,this.b=-b/f,this.c=-c/f,this.d=a/f,this.tx=(c*this.ty-d*e)/f,this.ty=-(a*this.ty-b*e)/f,this},e.isIdentity=function(){return 0===this.tx&&0===this.ty&&1===this.a&&0===this.b&&0===this.c&&1===this.d},e.equals=function(a){return this.tx===a.tx&&this.ty===a.ty&&this.a===a.a&&this.b===a.b&&this.c===a.c&&this.d===a.d},e.transformPoint=function(a,b,c){return c=c||{},c.x=a*this.a+b*this.c+this.tx,c.y=a*this.b+b*this.d+this.ty,c},e.decompose=function(a){null==a&&(a={}),a.x=this.tx,a.y=this.ty,a.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),a.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var b=Math.atan2(-this.c,this.d),c=Math.atan2(this.b,this.a),e=Math.abs(1-b/c);return 1e-5>e?(a.rotation=c/d.DEG_TO_RAD,this.a<0&&this.d>=0&&(a.rotation+=a.rotation<=0?180:-180),a.skewX=a.skewY=0):(a.skewX=b/d.DEG_TO_RAD,a.skewY=c/d.DEG_TO_RAD),a},e.copy=function(a){return this.setValues(a.a,a.b,a.c,a.d,a.tx,a.ty)},e.clone=function(){return new d(this.a,this.b,this.c,this.d,this.tx,this.ty)},e.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},d.identity=new d,c.exports=d}),define("phyxdown/ionejs/1.0.0/geom/Point",[],function(a,b,c){var d=function(a,b){this.x=a,this.y=b},e=d.prototype;e.distance=function(a){var b=a.x-this.x,c=a.y-this.y;return Math.sqrt(Math.pow(b,2)+Math.pow(c,2))},c.exports=d}),define("phyxdown/ionejs/1.0.0/core/events/MouseEvent",["phyxdown/ionejs/1.0.0/utils/inherits","phyxdown/ionejs/1.0.0/core/Event"],function(a,b,c){var d=a("phyxdown/ionejs/1.0.0/utils/inherits"),e=a("phyxdown/ionejs/1.0.0/core/Event"),f=0,g=0,h=function(a){e.apply(this,arguments);var b=a.local,c=a.global;this.x=b.x,this.y=b.y,this.dx=c.x-f,this.dy=c.y-g,f=c.x,g=c.y};d(h,e),c.exports=h}),define("phyxdown/ionejs/1.0.0/core/Event",[],function(a,b,c){var d=function(a){this.type=a.type,this.target=null,this.currentTarget=null,this.phase=null,this._immediatePropagationStoped=!1,this._propagationStoped=!1};d.CAPTURING_PHASE=1,d.BUBBLING_PHASE=2,d.TARGET_PHASE=3;var e=d.prototype;e.isPropagationStopped=function(){return this._propagationStoped},e.stopImmediatePropagation=function(){this._immediatePropagationStoped=!0,this._propagationStoped=!0},e.stopPropagation=function(){this._propagationStoped=!0},c.exports=d}),define("phyxdown/ionejs/1.0.0/core/ones/Stage",["phyxdown/ionejs/1.0.0/utils/inherits","phyxdown/ionejs/1.0.0/core/One","phyxdown/ionejs/1.0.0/geom/Matrix2D","phyxdown/ionejs/1.0.0/geom/Point"],function(a,b,c){var d=a("phyxdown/ionejs/1.0.0/utils/inherits"),e=a("phyxdown/ionejs/1.0.0/core/One"),f=function(a){a.parent=null,e.apply(this,arguments),this._hitable=!0,this.width=0,this.height=0},g=d(f,e);g.testHit=function(a){var b=a.x,c=a.y;return b>0&&b<this.width&&c>0&&c<this.height?!0:!1},g.draw=function(a){try{a.fillStyle="#ffffff",a.fillRect(0,0,this.width,this.height)}catch(b){}},c.exports=f}),define("phyxdown/ionejs/1.0.0/core/ones/Painter",["phyxdown/ionejs/1.0.0/utils/inherits","phyxdown/ionejs/1.0.0/core/One","phyxdown/ionejs/1.0.0/geom/Matrix2D","phyxdown/ionejs/1.0.0/geom/Point"],function(a,b,c){var d=a("phyxdown/ionejs/1.0.0/utils/inherits"),e=a("phyxdown/ionejs/1.0.0/core/One"),f=function(a){e.apply(this,arguments);var b=this;a.src&&b.set(a.src)},g=d(f,e);g.set=function(a){var b=this,c=new Image;c.src=a,b._image=c},g.draw=function(a){var b=this,c=b._image;try{a.drawImage(c,0,0)}catch(d){}},c.exports=f}),define("phyxdown/ionejs/1.0.0/core/hitTests/all",["phyxdown/ionejs/1.0.0/core/hitTests/ifInCircle"],function(a,b){b.ifInCircle=a("phyxdown/ionejs/1.0.0/core/hitTests/ifInCircle")}),define("phyxdown/ionejs/1.0.0/core/hitTests/ifInCircle",[],function(a,b){b.getTester=function(a,b){return function(c){return c.distance(a)<=b}}}),define("phyxdown/ionejs/1.0.0/helpers/Creator",[],function(a,b,c){var d=function(){this._genesis={}},e=d.prototype;e.set=function(a,b){return this._genesis[a]=b,b},e.parse=function(a){var b=this,c=function(a){for(var d=b._genesis[a.alias],e=a.options,f=a.children,g=new d(e),h=0,i=f.length;i>h;h++){var j=c(f[h]);g.addChild(j)}return g};return c(a)},c.exports=d});
